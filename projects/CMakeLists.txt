project(Venus)

FILE(GLOB children ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/*)
SET(dirlist "")
FOREACH(child ${children})
    IF(IS_DIRECTORY ${child} AND NOT ${child} STREQUAL ${CMAKE_CURRENT_SOURCE_DIR})
        LIST(APPEND dirlist ${child})
        IF(NOT EXISTS ${child}/CMakeLists.txt)
            file(COPY ${CMAKE_SOURCE_DIR}/include/default_resources/CMakeLists.txt DESTINATION ${child})
        endif()
        IF(NOT EXISTS ${child}/main.cpp)
            file(COPY ${CMAKE_SOURCE_DIR}/include/default_resources/main.cpp DESTINATION ${child})
        endif()
    ENDIF()
ENDFOREACH()

message(${dirlist})

FOREACH(subdir ${dirlist})
    ADD_SUBDIRECTORY(${subdir})
ENDFOREACH()